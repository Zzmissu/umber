#!/usr/bin/env bash
#
# invoke hello_world with gunicorn server, 
# everything explicitly on the command line
# for debug / test
#

# Is the project environment setup?
: ${UMBER_ROOT:?"Setup environment with '. env/activate' first."}
cd $UMBER_ROOT   # Set the working folder to the project root.

# stop the old ones
pkill -f gunicorn

gunicorn 								\
  --bind        	127.0.0.1:4000					\
  --workers     	1       					\
  --chdir		/Users/mahoney/sugar/academics/umber		\
  --pythonpath		/Users/mahoney/sugar/academics/umber/src	\
  --env			UMBER_CONFIG=DEVELOPMENT			\
  --env			UMBER_ROOT=/Users/mahoney/sugar/academics/umber \
  --env			FLASK_APP=src/umber.py				\
  --env			FLASK_DEBUG=1					\
  --env			WERKZEUG_DEBUG_PIN=off				\
  --capture-output							\
  --log-file 		-						\
  hello:app
